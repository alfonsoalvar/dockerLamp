# traefik/dynamic_conf/docker3.local.yml

http:
  routers:
    # 1. ROUTER HTTP (web): Redirige a HTTPS
    docker3-local:
      entryPoints:
        - web 
      rule: "Host(`paretically-arenose-farrah.ngrok-free.dev`)"
      middlewares:
        #- redirect-to-https@file # Redirecciona a HTTPS (443)
        - "strip-root-prefix@file"
      #service: "noop@internal" 
      service: "apache-service@file"

    # 2. ROUTER HTTPS (websecure): Sirve la p√°gina
    docker3-local-ssl:
      entryPoints:
        - websecure 
      rule: "Host(`paretically-arenose-farrah.ngrok-free.dev`)"
      service: "apache-service@file"
      middlewares:
        - "strip-root-prefix@file"
      tls:
        certResolver: stagingacme 
